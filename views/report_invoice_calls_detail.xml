<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <template id="report_invoice_calls_detail" inherit_id="account.report_invoice_document">
            <xpath expr="//p[@t-if='o.fiscal_position_id.note']" position="after">
                <p t-if="o.is_telephony" style="page-break-before:always;"></p>

                <div t-if="o.is_telephony" class="row" style="position:relative;top:30px;right:-60px;font-size:13px">
                    <p>
                        <strong>Period:</strong>
                        <span t-field="o.telephony_period_id.date_start"/>
                        -
                        <span t-field="o.telephony_period_id.date_end"/>
                    </p>
                </div>

                <table t-if="o.is_telephony" class="table table-condensed"
                       style="position:relative;top:65px;right:-45px;font-size:13px;width:685px">
                    <caption style="caption-side:top">
                        <strong>Calls</strong>
                    </caption>
                    <thead>
                        <tr>
                            <th style="font-weight:normal">Date - Hour</th>
                            <th style="font-weight:normal">Origin</th>
                            <th style="font-weight:normal">Destiny</th>
                            <th style="font-weight:normal" class="text-right">Duration</th>
                            <th style="font-weight:normal" class="text-right">Amount</th>
                        </tr>
                    </thead>
                    <tbody class="invoice_tbody">
                        <tr t-foreach="o.telephony_ids" t-as="c">

                            <td t-if="c.data_type == 'calls'">
                                <span t-field="c.time"/>
                            </td>
                            <td t-if="c.data_type == 'calls'">
                                <span t-field="c.origin"/>
                            </td>
                            <td t-if="c.data_type == 'calls'">
                                <span t-field="c.destiny"/>
                            </td>
                            <td t-if="c.data_type == 'calls'" class="text-right">
                                <span t-field="c.duration"/>
                            </td>
                            <td t-if="c.data_type == 'calls'" class="text-right">
                                <span t-field="c.amount"/>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- data -->
                <div t-if="o.data_type == 'multiple'">
                    <table t-if="o.is_telephony" class="table table-condensed"
                           style="position:relative;top:65px;right:-45px;font-size:13px;width:685px">
                        <caption style="caption-side:top">
                            <strong>Data</strong>
                        </caption>
                        <thead>
                            <tr>
                                <th style="font-weight:normal">Date - Hour</th>
                                <th style="font-weight:normal">Origin</th>
                                <th style="font-weight:normal">Destiny</th>
                                <th style="font-weight:normal" class="text-right">Duration</th>
                                <th style="font-weight:normal" class="text-right">Amount</th>
                            </tr>
                        </thead>
                        <tbody class="invoice_tbody">
                            <tr t-foreach="o.telephony_ids" t-as="c">

                                <td t-if="c.data_type == 'data'">
                                    <span t-field="c.time"/>
                                </td>
                                <td t-if="c.data_type == 'data'">
                                    <span t-field="c.origin"/>
                                </td>
                                <td t-if="c.data_type == 'data'">
                                    <span t-field="c.destiny"/>
                                </td>
                                <td t-if="c.data_type == 'data'" class="text-right">
                                    <span t-field="c.duration"/>
                                </td>
                                <td t-if="c.data_type == 'data'" class="text-right">
                                    <span t-field="c.amount"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- sms -->

                    <table t-if="o.is_telephony" class="table table-condensed"
                           style="position:relative;top:65px;right:-45px;font-size:13px;width:685px">
                        <caption style="caption-side:top">
                            <strong>SMS</strong>
                        </caption>
                        <thead>
                            <tr>
                                <th style="font-weight:normal">Date - Hour</th>
                                <th style="font-weight:normal">Origin</th>
                                <th style="font-weight:normal">Destiny</th>
                                <th style="font-weight:normal" class="text-right">Duration</th>
                                <th style="font-weight:normal" class="text-right">Amount</th>
                            </tr>
                        </thead>
                        <tbody class="invoice_tbody">
                            <tr t-foreach="o.telephony_ids" t-as="c">

                                <td t-if="c.data_type == 'sms'">
                                    <span t-field="c.time"/>
                                </td>
                                <td t-if="c.data_type == 'sms'">
                                    <span t-field="c.origin"/>
                                </td>
                                <td t-if="c.data_type == 'sms'">
                                    <span t-field="c.destiny"/>
                                </td>
                                <td t-if="c.data_type == 'sms'" class="text-right">
                                    <span t-field="c.duration"/>
                                </td>
                                <td t-if="c.data_type == 'sms'" class="text-right">
                                    <span t-field="c.amount"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- other -->

                    <table t-if="o.is_telephony" class="table table-condensed"
                           style="position:relative;top:65px;right:-45px;font-size:13px;width:685px">
                        <caption style="caption-side:top">
                            <strong>Other</strong>
                        </caption>
                        <thead>
                            <tr>
                                <th style="font-weight:normal">Date - Hour</th>
                                <th style="font-weight:normal">Origin</th>
                                <th style="font-weight:normal">Destiny</th>
                                <th style="font-weight:normal" class="text-right">Duration</th>
                                <th style="font-weight:normal" class="text-right">Amount</th>
                            </tr>
                        </thead>
                        <tbody class="invoice_tbody">
                            <tr t-foreach="o.telephony_ids" t-as="c">

                                <td t-if="c.data_type == 'other'">
                                    <span t-field="c.time"/>
                                </td>
                                <td t-if="c.data_type == 'other'">
                                    <span t-field="c.origin"/>
                                </td>
                                <td t-if="c.data_type == 'other'">
                                    <span t-field="c.destiny"/>
                                </td>
                                <td t-if="c.data_type == 'other'" class="text-right">
                                    <span t-field="c.duration"/>
                                </td>
                                <td t-if="c.data_type == 'other'" class="text-right">
                                    <span t-field="c.amount"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </xpath>
        </template>

    </data>
</odoo>
