<openerp>
    <data>
        <!-- BEGIN view call details tree -->
        <record model="ir.ui.view" id="view_telephony_isp_call_detail_tree">
            <field name="name">telephony_isp.call_detail.tree</field>
            <field name="model">telephony_isp.call_detail</field>
            <field name="arch" type="xml">
              <tree string="Call Detail Record" colors="red:status=='error'">
                  <field name="partner"/>
                  <field name="contract_code"/>
                  <field name="product"/>
                  <field name="time"/>
                  <field name="origin"/>
                  <field name="destiny"/>
                  <field name="rate_id"/>
                  <field name="duration"/>
                  <field name="cost"/>
                  <field name="final_price" sum="Total Amount"/>
                  <field name="status" invisible="1"/>
              </tree>
          </field>
        </record>
        <!-- END view call details tree -->

        <!-- BEGIN view call details search -->
        <record id="view_telephony_isp_call_detail_search_view" model="ir.ui.view">
            <field name="name">call detail search view</field>
            <field name="model">telephony_isp.call_detail</field>
            <field eval="10" name="priority"/>
            <field name="arch" type="xml">
                <search string="Call detail">
                    <field name="partner"/>
                    <field name="contract_code"/>
                    <field name="time"/>
                    <field name="origin"/>
                    <field name="destiny"/>
                    <filter string="To Invoice" domain="[('status','=','draft')]" help="Call to be invoiced"/>
                    <filter string="With errors" domain="[('status','=','error')]" help="Call with an error"/>
                    <group expand="0" string="Group By">
                        <filter string="Origin" domain="[]" context="{'group_by':'origin'}"/>
                        <filter string="Partner" domain="[]" context="{'group_by':'partner'}"/>
                        <filter string="Contract" domain="[]" context="{'group_by':'contract_code'}"/>
                    </group>
                </search>
            </field>
        </record>
        <!-- END view call details search -->


        <!-- BEGIN view supplier tree -->
        <record model="ir.ui.view" id="view_telephony_isp_supplier_tree">
            <field name="name">telephony_isp.supplier.tree</field>
            <field name="model">telephony_isp.supplier</field>
            <field name="arch" type="xml">
              <tree string="Suppliers">
                  <field name="name"/>
                  <field name="partner_id"/>
                  <field name="ratio"/>
                  <field name="date_start"/>
                  <field name="date_end"/>
                  <field name="rate_ids"/>
              </tree>
          </field>
        </record>
        <!-- END view supplier tree -->

        <!-- BEGIN view supplier form -->
        <record model="ir.ui.view" id="view_telephony_isp_supplier_form">
            <field name="name">telephony_isp.supplier.form</field>
            <field name="model">telephony_isp.supplier</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form string="Telephony supplier">
                  <group>
                      <field name="name"/>
                      <field name="partner_id"/>
                      <field name="product_id"/>
                      <field name="ratio"/>
                      <field name="date_start"/>
                      <field name="date_end"/>
                  </group>
                  <group>
                      <field name="rate_ids">
                          <tree default_order='prefix'>
                              <field name="special"/>
                              <field name="prefix"/>
                              <field name="name"/>
                              <field name="price"/>
                              <field name="rate"/>
                          </tree>
                      </field>
                  </group>
              </form>
          </field>
        </record>
        <!-- END view supplier form -->

        <!-- BEGIN view rate tree -->
        <record model="ir.ui.view" id="view_telephony_isp_rate_tree">
            <field name="name">telephony_isp.rate.tree</field>
            <field name="model">telephony_isp.rate</field>
            <field name="arch" type="xml">
              <tree string="Suppliers">
                  <field name="supplier_id"/>
                  <field name="prefix"/>
                  <field name="special"/>
                  <field name="segment"/>
                  <field name="cost"/>
                  <field name="price"/>
                  <field name="rate"/>
              </tree>
          </field>
        </record>
        <!-- END view rate tree -->

        <!-- BEGIN view rate form -->
        <record model="ir.ui.view" id="view_telephony_isp_rate_form">
            <field name="name">telephony_isp.rate.form</field>
            <field name="model">telephony_isp.rate</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
              <form string="Rate">
                  <group>
                      <field name="supplier_id"/>
                      <field name="special"/>
                      <field name="prefix"/>
                      <field name="segment"/>
                      <field name="name"/>
                      <field name="price" attrs="{'invisible':[('special', '=', True)]}"/>
                      <field name="rate" attrs="{'invisible':[('special', '=', False)]}" />
                  </group>
              </form>
          </field>
        </record>
        <!-- END view rate form -->


        <!-- BEGIN actions -->
        <record model="ir.actions.act_window" id="action_list_call_details">
            <field name="name">Call Detail Records</field>
            <field name="res_model">telephony_isp.call_detail</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.actions.act_window" id="action_list_suppliers">
            <field name="name">Suppliers</field>
            <field name="res_model">telephony_isp.supplier</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.actions.act_window" id="action_list_rates">
            <field name="name">Rates</field>
            <field name="res_model">telephony_isp.rate</field>
            <field name="view_mode">tree,form</field>
        </record>
        <!-- END actions -->

        <!-- BEGIN menus -->
        <menuitem id="telephony_main_menu" name="ISP"/>

        <menuitem id="telephony_data_menu" name="Data" parent="telephony_main_menu"/>
        <menuitem id="telephony_cdrs_menu" parent="telephony_data_menu" name="CDRs" sequence="10"
                  action="action_list_call_details"/>
        <menuitem id="telephony_import_cdr_menu" parent="telephony_data_menu" name="Import CDR file" sequence="20"
                  action="launch_import_cdr_wizard"/>

        <menuitem id="telephony_settings_menu" name="Settings" parent="telephony_main_menu"/>
        <menuitem id="telephony_supplier_menu" parent="telephony_settings_menu" name="Suppliers" sequence="30"
                  action="action_list_suppliers"/>
        <menuitem id="telephony_rates_menu" parent="telephony_settings_menu" name="Rates" sequence="34"
                  action="action_list_rates"/>
        <!-- END menus -->
    </data>
</openerp>
